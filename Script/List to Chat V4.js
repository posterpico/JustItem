"use strict";(self.webpackChunk_shopee_martfe_mobile_micro_fe=self.webpackChunk_shopee_martfe_mobile_micro_fe||[]).push([[9497],{98688:(e,t,o)=>{o.d(t,{t:()=>i});var l=o(20552),n=o(80437);const{withI18nCollections:r}=n.I18n,i=r([l.Bt,l.w_,l.k7,l.ie,l.PP,l.gI])},63045:(e,t,o)=>{o.d(t,{$:()=>n,S:()=>r});var l=o(15502);const n=(0,l.createAppContext)(),r=(0,l.createInjectReducerContext)()},83114:(e,t,o)=>{o.d(t,{X6:()=>d,q2:()=>u,Hs:()=>_}),o(38560),o(23988);const l=(0,o(1857).n)("FETCH_MART_DEALS_COLLECTIONS");var n=o(25874),r=o(178),i=o(95362),s=o(3601);const c={progress:i.Z.INIT,collections:[],total:0,error:null,error_msg:null,nextOffset:0,has_more:!1};(0,r.Z)({[l.REQUESTED]:(e,t)=>(0,n.Z)({},e,{progress:i.Z.REQ}),[l.SUCCESS]:(e,t)=>{var o,l,r,c;const{payload:{offset:a,limit:u,response:_}}=t,d=e.collections,p=null!=(o=null==_||null==(l=_.data)?void 0:l.collections)?o:[],m=null!=(r=null==_||null==(c=_.data)?void 0:c.total)?r:0;return(0,n.Z)({},e,{total:m,has_more:m>u+a,progress:i.Z.OK,nextOffset:a+u,collections:(0,s.uV)(d,p,a)})},[l.FAILED]:(e,t)=>{const{payload:{error:o,error_msg:l}}=t;return(0,n.Z)({},e,{progress:i.Z.ERR,error:o,error_msg:l})}},c);let a=function(e){return e[e.ProductCollection=0]="ProductCollection",e[e.ShopCategory=1]="ShopCategory",e}({});const u=e=>e.type===a.ProductCollection,_=e=>e.type===a.ShopCategory,d=(e,t)=>u(e)||!e.shop_category?{collection:e.prod_collection_id,martCollectionId:t}:{shop:e.shop_category.shop_id,shopCollection:e.shop_category.shop_collection_id,martCollectionId:t}},34714:(e,t,o)=>{o.d(t,{XU:()=>a,Qg:()=>u,uN:()=>d,Im:()=>C,qs:()=>_,ir:()=>y,s0:()=>g,c4:()=>j,wE:()=>L,bE:()=>b,hW:()=>A,Qz:()=>D,lM:()=>M,w1:()=>T,VO:()=>I,uL:()=>v});var l=o(92375),n=o(40255),r=o(80437),i=o(1857);const s=(0,i.n)("FETCH_MART_HORIZONTAL_COLLECTIONS"),c=(0,i.n)("FETCH_MART_HORIZONTAL_COLLECTION"),a="martHomepageCollections",u="martDealpageCollections";let _=function(e){return e[e.Home=1]="Home",e[e.DealsTab=2]="DealsTab",e}({});const d=3,{fetchInfo:p,jsonPost:m}=r.FetchUtils;let C=function(e){return e.TITLE="title",e.BANNER="banner",e}({}),E=function(e){return e.MART_ITEM_CARD="mart_item_card",e.SEE_MORE_CARD="see_more_card",e}({});const h=e=>{var t,o;return`${e.mart_collection_id}-${String(null==(t=e.account)?void 0:t.is_cc_installment_payment_eligible)}-${String(null==(o=e.account)?void 0:o.is_non_cc_installment_payment_eligible)}`};function v(e,t){var o,l,n,r;return{itemid:e.itemid,shopid:e.shopid,location:e.item_location,discount_percentage:e.discount_percentage,has_voucher_label:e.eligible_promotion_labels.some((e=>"VOUCHER"===(null==e?void 0:e.name))),has_deep_discount_labe:e.eligible_promotion_labels.some((e=>"DEEP_DISCOUNT"===(null==e?void 0:e.name))),collection_id:null!=(o=null==t?void 0:t.prod_collection_id)?o:-1,collection_title:null==t?void 0:t.title,in_shop_category_id:null!=(l=null==t||null==(n=t.shop_category)?void 0:n.shop_collection_id)?l:-1,section_location:null!=(r=null==t?void 0:t.section_location)?r:0}}function I(e,t){var o,l,n,r,i;return{itemid:null!=(o=e.itemid)?o:-1,shopid:null!=(l=e.shopid)?l:-1,collection_id:null!=(n=null==t?void 0:t.prod_collection_id)?n:-1,in_shop_category_id:null!=(r=null==t||null==(i=t.shop_category)?void 0:i.shop_collection_id)?r:-1}}const f={offset:0,limit:20,page:_.Home},g=e=>{const{offset:t,limit:o,page:r}=e||f,i=(0,n.Wc)({offset:t,limit:o});return(0,l.Vi)({apiCall:()=>function(e,t){const o=e===_.DealsTab?`/api/v4/pages/mart/deals_tab/get_collections${t||""}`:"/api/v4/mart/home/get_horizontal_collection";return p(o)}(r,i),actions:[()=>({type:s.REQUESTED}),(e,l)=>({type:s.SUCCESS,payload:{response:l,offset:t,limit:o}}),(e,t)=>({type:s.FAILED,payload:{error:t.error,error_msg:null}})]})},y=e=>{const t=h(e);return(0,l.Vi)({apiCall:()=>function(e){return m("/api/v4/chat/get_item_batch",e)}(e),actions:[()=>({type:c.REQUESTED,payload:{key:t}}),(e,o)=>({type:c.SUCCESS,payload:{key:t,response:o}}),(e,o)=>({type:c.FAILED,payload:{key:t,error:o.error,error_msg:null}})]})};var R=o(25874),S=o(95362),Z=o(7346),x=o(178);const O={progress:S.Z.INIT,collections:[],error:null,error_msg:null,total:0,nextOffset:0,has_more:!1,collectionsWithItem:{}},T=(0,x.Z)({[s.REQUESTED]:(e,t)=>(0,R.Z)({},e,{progress:S.Z.REQ}),[s.SUCCESS]:(e,t)=>{var o,l,n,r;const{payload:{offset:i,limit:s,response:c}}=t,a=e.collections,u=null!=(o=null==c||null==(l=c.data)?void 0:l.collections)?o:[],_=null!=(n=null==c||null==(r=c.data)?void 0:r.total)?n:0;return(0,R.Z)({},e,{total:_,progress:S.Z.OK,nextOffset:(null!=i?i:0)+(null!=s?s:0),has_more:_>(null!=s?s:0)+(null!=i?i:0),collections:(0,Z.Z)(a,u,null!=i?i:0)})},[s.FAILED]:(e,t)=>{const{payload:{error:o,error_msg:l}}=t;return(0,R.Z)({},e,{progress:S.Z.ERR,error:o,error_msg:l})},[c.REQUESTED]:(e,t)=>{const{payload:{key:o}}=t;return(0,R.Z)({},e,{collectionsWithItem:(0,R.Z)({},e.collectionsWithItem,{[o]:(0,R.Z)({},e.collectionsWithItem[o],{progress:S.Z.REQ})})})},[c.SUCCESS]:(e,t)=>{var o;const{payload:{key:l,response:n}}=t,r=(null==n||null==(o=n.data)?void 0:o.item_list)||[];return n?(0,R.Z)({},e,{collectionsWithItem:(0,R.Z)({},e.collectionsWithItem,{[l]:(0,R.Z)({},e.collectionsWithItem[l],{data:(0,R.Z)({},n.data,{item_list:r.filter((e=>!!e.item_info&&!!e.item_card_displayed_asset)),show_see_more:r.some((e=>(null==e?void 0:e.type)===E.SEE_MORE_CARD))}),progress:S.Z.OK})})}):(0,R.Z)({},e)},[c.FAILED]:(e,t)=>{const{payload:{key:o}}=t;return(0,R.Z)({},e,{collectionsWithItem:(0,R.Z)({},e.collectionsWithItem,{[o]:(0,R.Z)({},e.collectionsWithItem[o],{progress:S.Z.ERR})})})}},O),D=e=>{var t;return null!=(t=null==e?void 0:e.nextOffset)?t:0},A=e=>{var t;return null!=(t=null==e?void 0:e.has_more)&&t},M=e=>{var t;return null!=(t=null==e?void 0:e.progress)?t:S.Z.INIT},N=[],b=(e,t)=>{var o;const l=null!=(o=null==e?void 0:e.collections)?o:N;return t?l.slice(t.offset,t.offset+t.limit):l},L=(e,t)=>{var o;return null==e||null==(o=e.collectionsWithItem)||null==(o=o[h(t)])?void 0:o.progress},j=(e,t)=>{var o;return null==e||null==(o=e.collectionsWithItem)||null==(o=o[h(t)])?void 0:o.data}},15502:(e,t,o)=>{o.d(t,{createAppContext:()=>n,createInjectReducerContext:()=>r,useMicroApp:()=>C});var l=o(87363);o(21624);const n=()=>{const e=(0,l.createContext)({});return e.displayName="MicroAppContext",e};o(70893);const r=()=>{const e=(0,l.createContext)({injectAsyncReducer:()=>{}});return e.displayName="MicroAppInjectReducerContext",e};var i=o(25874),s=o(62827),c=o(86679),a=o(29841);const u={};var _=o(7366),d=o.n(_),p=o(80437),m=o(5989);const C=(e,t)=>(0,l.useMemo)((()=>{const o=d().getInitialData(e),l=(0,m.cf)({initialState:(null==o?void 0:o.initialAppQueries)||null});p.I18n.addInitialCollections((null==o?void 0:o.initialCollections)||[]),p.I18n.addInitialTranslation((null==o?void 0:o.initialTranslations)||{});const n=function(e,t){var o;if(u[e])return u[e];const l=null!=(o=window)&&o.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&"live"!==__ENV__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:`Micro App: ${e}`}):s.compose,n=(0,c.K)((0,i.Z)({},t,{enhancer:l((0,s.applyMiddleware)(a.Z))}));return u[e]=n,n}(e,{reducers:t,initialState:(null==o?void 0:o.storeState)||{}});return d().clearInitialData(e),{storeManager:n,queryClient:l}}),[e,t])},78777:(e,t,o)=>{o.d(t,{ZP:()=>d,Xr:()=>_,lh:()=>a,nR:()=>u});var l=o(87363),n=o(21624),r=o(70893);const i=(0,l.createContext)({CustomRedux:n.ReactReduxContext,CustomInject:r.InjectReducerContext});i.displayName="CustomContext";const s=i;var c=o(36094);o(25874);const a=function(){const{CustomInject:e}=(0,l.useContext)(s),{injectAsyncReducer:t}=(0,l.useContext)(e);return t},u=function(...e){const{CustomRedux:t}=(0,l.useContext)(s);return(0,l.useMemo)((()=>(0,n.createSelectorHook)(t)),[t])(...e)},_=function(...e){const{CustomRedux:t}=(0,l.useContext)(s);return(0,l.useMemo)((()=>(0,n.createDispatchHook)(t)),[t])(...e)},d=function(e){const{children:t,customRedux:o,customInject:r,storeManager:i}=e,a=o,u=r,_=(0,l.useMemo)((()=>({CustomRedux:o,CustomInject:r})),[o,r]);return(0,c.jsx)(n.Provider,{store:i.store,context:a,children:(0,c.jsx)(u.Provider,{value:{injectAsyncReducer:i.injectReducer},children:(0,c.jsx)(s.Provider,{value:_,children:t})})})}},20552:(e,t,o)=>{o.d(t,{BV:()=>a,Bt:()=>l,PP:()=>s,gI:()=>c,ie:()=>i,k7:()=>r,w_:()=>n});const l=287,n=256,r=16,i=131,s=257,c=268,a=14},65559:(e,t,o)=>{e.exports=o.microfeI(5)},66517:(e,t,o)=>{e.exports=o.microfeI(3)},96234:(e,t,o)=>{e.exports=o.microfeI(1)}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-mart/_/9497.fff21aef4e56b13069bc.js.map
